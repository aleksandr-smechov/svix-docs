(self.webpackChunksvix_docs=self.webpackChunksvix_docs||[]).push([[149],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return c},kt:function(){return d}});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=i.createContext({}),p=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return i.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=p(n),d=a,v=m["".concat(l,".").concat(d)]||m[d]||u[d]||r;return n?i.createElement(v,o(o({ref:t},c),{},{components:n})):i.createElement(v,o({ref:t},c))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var p=2;p<r;p++)o[p]=n[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8215:function(e,t,n){"use strict";var i=n(7294);t.Z=function(e){var t=e.children,n=e.hidden,a=e.className;return i.createElement("div",{role:"tabpanel",hidden:n,className:a},t)}},5064:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=n(7294),a=n(9443);var r=function(){var e=(0,i.useContext)(a.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},o=n(6010),s="tabItem_1uMI",l="tabItemActive_2DSg";var p=37,c=39;var u=function(e){var t=e.lazy,n=e.block,a=e.defaultValue,u=e.values,m=e.groupId,d=e.className,v=r(),h=v.tabGroupChoices,f=v.setTabGroupChoices,g=(0,i.useState)(a),y=g[0],b=g[1],k=i.Children.toArray(e.children),x=[];if(null!=m){var _=h[m];null!=_&&_!==y&&u.some((function(e){return e.value===_}))&&b(_)}var T=function(e){var t=e.currentTarget,n=x.indexOf(t),i=u[n].value;b(i),null!=m&&(f(m,i),setTimeout((function(){var e,n,i,a,r,o,s,p;(e=t.getBoundingClientRect(),n=e.top,i=e.left,a=e.bottom,r=e.right,o=window,s=o.innerHeight,p=o.innerWidth,n>=0&&r<=p&&a<=s&&i>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(l),setTimeout((function(){return t.classList.remove(l)}),2e3))}),150))},w=function(e){var t,n;switch(e.keyCode){case c:var i=x.indexOf(e.target)+1;n=x[i]||x[0];break;case p:var a=x.indexOf(e.target)-1;n=x[a]||x[x.length-1]}null==(t=n)||t.focus()};return i.createElement("div",{className:"tabs-container"},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},d)},u.map((function(e){var t=e.value,n=e.label;return i.createElement("li",{role:"tab",tabIndex:y===t?0:-1,"aria-selected":y===t,className:(0,o.Z)("tabs__item",s,{"tabs__item--active":y===t}),key:t,ref:function(e){return x.push(e)},onKeyDown:w,onFocus:T,onClick:T},n)}))),t?(0,i.cloneElement)(k.filter((function(e){return e.props.value===y}))[0],{className:"margin-vert--md"}):i.createElement("div",{className:"margin-vert--md"},k.map((function(e,t){return(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==y})}))))}},9443:function(e,t,n){"use strict";var i=(0,n(7294).createContext)(void 0);t.Z=i},7275:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(7294),a=n(5064);function r(e){var t=e.children,n=e.additionalTabs,r=void 0===n?[]:n;return i.createElement(a.Z,{defaultValue:"js",groupId:"programming-language",values:[{label:"JavaScript",value:"js"},{label:"Python",value:"py"},{label:"Go",value:"go"},{label:"Java",value:"java"},{label:"Kotlin",value:"kotlin"}].concat(r,[{label:"CLI",value:"cli"},{label:"cURL",value:"curl"}])},t)}},1756:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return p},metadata:function(){return c},toc:function(){return u},default:function(){return d}});var i=n(4786),a=n(6843),r=(n(7294),n(3905)),o=n(7275),s=n(8215),l={title:"Rate Limiting Endpoints"},p=void 0,c={unversionedId:"rate-limit",id:"rate-limit",isDocsHomePage:!1,title:"Rate Limiting Endpoints",description:"While Svix can handle however many messages you send us, your customers' endpoints may not be able to. This is why the Svix API includes rate-limiting calls to customer endpoints.",source:"@site/docs/rate-limit.mdx",sourceDirName:".",slug:"/rate-limit",permalink:"/rate-limit",editUrl:"https://github.com/svix/svix-docs/edit/main/docs/rate-limit.mdx",version:"current",frontMatter:{title:"Rate Limiting Endpoints"},sidebar:"mainSidebar",previous:{title:"Incoming Webhooks",permalink:"/incoming-webhooks"},next:{title:"Retry Schedule",permalink:"/retries"}},u=[{value:"How does it work?",id:"how-does-it-work",children:[]},{value:"Setting the limits",id:"setting-the-limits",children:[{value:"Setting application rate limits",id:"setting-application-rate-limits",children:[]},{value:"Setting endpoint rate limits",id:"setting-endpoint-rate-limits",children:[]}]},{value:"Intended use",id:"intended-use",children:[]}],m={toc:u};function d(e){var t=e.components,n=(0,a.Z)(e,["components"]);return(0,r.kt)("wrapper",(0,i.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"While Svix can handle however many messages you send us, your customers' endpoints may not be able to. This is why the Svix API includes rate-limiting calls to customer endpoints."),(0,r.kt)("p",null,"This lets you send as many webhooks per second as you want without having to worry about overloading your customers' systems."),(0,r.kt)("h2",{id:"how-does-it-work"},"How does it work?"),(0,r.kt)("p",null,"You can set a rate limit on both the application, which applies to all of the endpoints for that application, or the endpoint to only set it for that specific endpoint."),(0,r.kt)("p",null,"The rate limit is defined as a limit for the number of messages per second to send to the endpoint. After the limit is reached, requests will get throttled so to keep a consistent rate under the limit."),(0,r.kt)("p",null,"Due to the nature of distributed systems the actual rate of messages can sometimes be slightly above the enforce rate limit. So for example, if you set a rate limit of 1,000 per seconds, an endpoint may potentially get messages at a rate of 1,050 or even higher."),(0,r.kt)("h2",{id:"setting-the-limits"},"Setting the limits"),(0,r.kt)("p",null,"You can set the rate limit on either the application or each of its endpoint. The rate limit is enforced per endpoint, so limits set on the application propagate to the endpoints and can be overridden by the endpoint specific settings."),(0,r.kt)("h3",{id:"setting-application-rate-limits"},"Setting application rate limits"),(0,r.kt)("p",null,"You can set the rate limit on an application when ",(0,r.kt)("a",{parentName:"p",href:"https://api.svix.com/docs#operation/create_application_api_v1_app__post"},"creating")," or ",(0,r.kt)("a",{parentName:"p",href:"https://api.svix.com/docs#operation/update_application_api_v1_app__app_id___put"},"updating")," it using the ",(0,r.kt)("inlineCode",{parentName:"p"},"rateLimit")," property. The value is the number of messages per second."),(0,r.kt)(o.Z,{mdxType:"CodeTabs"},(0,r.kt)(s.Z,{value:"js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'import { Svix } from "svix";\n\nconst svix = new Svix("AUTH_TOKEN");\nconst app = await svix.application.create({name: "Application name", rateLimit: 1000});\n'))),(0,r.kt)(s.Z,{value:"py",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'from svix.api import Svix, ApplicationIn\n\nsvix = Svix("AUTH_TOKEN")\napp = svix.application.create(ApplicationIn(name="Application name", rate_limit=1000))\n'))),(0,r.kt)(s.Z,{value:"go",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'import (\n    svix "github.com/svix/svix-libs/go"\n)\n\nsvixClient := svix.New("AUTH_TOKEN", nil)\napp, err := svixClient.Application.Create(&svix.ApplicationIn{\n    Name: "Application name",\n    RateLimit: 1000,\n})}\n'))),(0,r.kt)(s.Z,{value:"java",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'import com.svix.models.ApplicationIn;\nimport com.svix.models.ApplicationOut;\nimport com.svix.Svix;\n\nSvix svix = new Svix("AUTH_TOKEN");\nApplicationOut app = svix.getApplication().create(new ApplicationIn().name("Application name").rateLimit(1000));\n'))),(0,r.kt)(s.Z,{value:"kotlin",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},'import com.svix.kotlin.models.ApplicationIn;\nimport com.svix.kotlin.Svix;\n\nval svix = Svix("AUTH_TOKEN")\nval applicationOut = svix.application.create(ApplicationIn(\n    name = "Application name",\n    rateLimit = 1000))\n'))),(0,r.kt)(s.Z,{value:"cli",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'export SVIX_AUTH_TOKEN=\'AUTH_TOKEN\'\nsvix application create \'{ "name": "Application name", "rateLimit": 1000 }\'\n'))),(0,r.kt)(s.Z,{value:"curl",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl -X POST "https://api.svix.com/api/v1/app/" \\\n    -H  "Accept: application/json" \\\n    -H  "Content-Type: application/json" \\\n    -H  "Authorization: Bearer AUTH_TOKEN" \\\n    -d \'{"name": "Application name", "rateLimit": 1000}\'\n')))),(0,r.kt)("h3",{id:"setting-endpoint-rate-limits"},"Setting endpoint rate limits"),(0,r.kt)("p",null,"Similar to the application rate limiting, you can set the rate limit on an endpoint when ",(0,r.kt)("a",{parentName:"p",href:"https://api.svix.com/docs#operation/create_endpoint_api_v1_app__app_id__endpoint__post"},"creating")," or ",(0,r.kt)("a",{parentName:"p",href:"https://api.svix.com/docs#operation/update_endpoint_api_v1_app__app_id__endpoint__endpoint_id___put"},"updating")," it using the ",(0,r.kt)("inlineCode",{parentName:"p"},"rateLimit")," property. The value is the number of messages per second."),(0,r.kt)("h2",{id:"intended-use"},"Intended use"),(0,r.kt)("p",null,"The rate limit is intended to be used as a sort of a fuse to protect your customers' servers from sudden peaks in message traffic that they may not be able to withstand. With the rate limiting, this peak is smoothened and spread over multiple seconds, sending messages at a rate your customers can handle."),(0,r.kt)("p",null,"One important thing to remember with rate limiting, is that if you are limiting to 1,000 messages per second and are consistently sending messages over that limit (e.g. 2,000 per second), the queue will get congested and you will be sending messages with infinitely increasing delays. We can alert you of such issues, and help you address them when they occur, though this is still something to be mindful of."))}d.isMDXComponent=!0},6010:function(e,t,n){"use strict";function i(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=i(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function a(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=i(e))&&(a&&(a+=" "),a+=t);return a}n.d(t,{Z:function(){return a}})}}]);