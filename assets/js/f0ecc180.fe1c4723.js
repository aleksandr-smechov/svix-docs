(self.webpackChunksvix_docs=self.webpackChunksvix_docs||[]).push([[845],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return h}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),h=i,m=u["".concat(l,".").concat(h)]||u[h]||d[h]||o;return n?a.createElement(m,r(r({ref:t},p),{},{components:n})):a.createElement(m,r({ref:t},p))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,r[1]=s;for(var c=2;c<o;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4768:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return r},contentTitle:function(){return s},metadata:function(){return l},toc:function(){return c},default:function(){return d}});var a=n(4786),i=n(6843),o=(n(7294),n(3905)),r={title:"Your first event type schema"},s=void 0,l={unversionedId:"tutorials/event-type-schema",id:"tutorials/event-type-schema",isDocsHomePage:!1,title:"Your first event type schema",description:"This guide assumes your familiar with the basics of event types and the App Portal.",source:"@site/docs/tutorials/event-type-schema.mdx",sourceDirName:"tutorials",slug:"/tutorials/event-type-schema",permalink:"/tutorials/event-type-schema",editUrl:"https://github.com/svix/svix-docs/edit/main/docs/tutorials/event-type-schema.mdx",version:"current",frontMatter:{title:"Your first event type schema"},sidebar:"mainSidebar",previous:{title:"Getting Started with the CLI",permalink:"/tutorials/cli"},next:{title:"Svix Play - webhook debugger",permalink:"/play"}},c=[{value:"Choosing an event type name",id:"choosing-an-event-type-name",children:[]},{value:"Defining the schema",id:"defining-the-schema",children:[{value:"Option A. Using the visual editor",id:"option-a-using-the-visual-editor",children:[]},{value:"Option B. Providing a JSONSchema",id:"option-b-providing-a-jsonschema",children:[]}]},{value:"Event Catalog",id:"event-catalog",children:[]}],p={toc:c};function d(e){var t=e.components,r=(0,i.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Prerequisites")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"This guide assumes your familiar with the basics of ",(0,o.kt)("a",{parentName:"p",href:"../event-types"},"event types")," and the ",(0,o.kt)("a",{parentName:"p",href:"../app-portal"},"App Portal"),"."))),(0,o.kt)("p",null,"The key to providing an easy webhook integration experience for your users lays in your event types.\nThe first thing your users are interested in seeing when integrating with you is: what events do you send and what information do the events provide."),(0,o.kt)("p",null,"It's very important that users can answer these two questions just by looking at your event types."),(0,o.kt)("p",null,"Let's walk through creating a new event type with Svix."),(0,o.kt)("h2",{id:"choosing-an-event-type-name"},"Choosing an event type name"),(0,o.kt)("p",null,"Let's imagine we are defining webhooks for when an organization within your service changes. Webhook consumers might be interested in when a user is added or removed from the organization. Or when the organization settings are changed. It's important to imagine what hypothetical endpoints a user might have listening to those events."),(0,o.kt)("p",null,"Your consumers might have one endpoint for organization member changes and one for listening to settings changes."),(0,o.kt)("p",null,"To make the event types discoverable, let's define them as follows:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"organization.member.added")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"organization.member.deleted")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"organization.member.modified")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"organization.settings.modified"))),(0,o.kt)("p",null,"We have defined logic groups of event types and dot-delimited them. Svix understands this syntax and will group them visually in the App Portal UI."),(0,o.kt)("h2",{id:"defining-the-schema"},"Defining the schema"),(0,o.kt)("p",null,"Now we want our users to know just exactly what they can expect to see in the message payload for ",(0,o.kt)("inlineCode",{parentName:"p"},"organization.member.added"),"."),(0,o.kt)("p",null,"So let's add a schema to the event type:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"add-schema",src:n(1254).Z})),(0,o.kt)("h3",{id:"option-a-using-the-visual-editor"},"Option A. Using the visual editor"),(0,o.kt)("p",null,"To get started with the visual editor, let's add some child fields. We need a field for ",(0,o.kt)("inlineCode",{parentName:"p"},"account_id"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"first_name"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"last_name")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"created_at"),"."),(0,o.kt)("p",null,'To create a new child field, click "Add child" from under the parent field. Each field row has the following properties:'),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"field name"),(0,o.kt)("li",{parentName:"ul"},"type"),(0,o.kt)("li",{parentName:"ul"},"title"),(0,o.kt)("li",{parentName:"ul"},"is required?")),(0,o.kt)("p",null,"First, fill in the field names. You'll notice that the field titles will automatically update to match the field name. You can choose to override this with your own title if you'd like. Next, since all of these fields will always be present, make sure to check the \"is required\" checkboxes next to each field."),(0,o.kt)("p",null,"Finally, we can make the field data types more specific. ",(0,o.kt)("inlineCode",{parentName:"p"},"created_at")," isn't just a string, we also know the format of the string. To specify the format, click the gear icon to the right of the field. You should see a list of configuration options for the ",(0,o.kt)("inlineCode",{parentName:"p"},"created_at")," field. Change the format to ",(0,o.kt)("inlineCode",{parentName:"p"},"date-time")," and add a description here if you'd like."),(0,o.kt)("p",null,"Once you've defined this basic schema, save your event type. The event type detail view will now show you a preview of the schema that matches the interface your users will see in the Event Catalog."),(0,o.kt)("h4",{id:"adding-a-custom-example"},"Adding a custom example"),(0,o.kt)("p",null,"Next to the schema preview, you should see an example event defined. While this example is based on the schema parameters you defined, it might not be the best representation of reality."),(0,o.kt)("p",null,"For this reason, it's best to provide your own custom example."),(0,o.kt)("p",null,"To do so, go back back into edit mode for the schema."),(0,o.kt)("p",null,'From there, click "Configure example". In the example textarea, you can change the example to be something like the following:'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "account_id": "acct_0123456",\n  "first_name": "Bruce",\n  "last_name": "Wayne",\n  "created_at": "2021-09-22T17:47:43.575Z"\n}\n')),(0,o.kt)("p",null,'Then click "Save" to see your changes reflected in the schema preview and the Event Catalog.'),(0,o.kt)("h3",{id:"option-b-providing-a-jsonschema"},"Option B. Providing a JSONSchema"),(0,o.kt)("p",null,"Instead of using the visual editor, you can also choose to provide your own JSONSchema. If you already have a JSONSchema (or JSONSchema-compatible definition) defined for your events, this is likely your fastest option."),(0,o.kt)("p",null,'When you are configuring your schema, you can switch to the "Code" tab to fill out your own JSONSchema (Draft 7) spec.'),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"schema-add-code",src:n(6683).Z})),(0,o.kt)("p",null,"After saving the raw JSONSchema, you can preview your event type to make sure that the schema matches what you expected."),(0,o.kt)("h2",{id:"event-catalog"},"Event Catalog"),(0,o.kt)("p",null,"After defining your event types and schemas, your users will be able to preview all your event types from the Event Catalog in the ",(0,o.kt)("a",{parentName:"p",href:"../app-portal"},"App Portal"),"."))}d.isMDXComponent=!0},6683:function(e,t,n){"use strict";t.Z=n.p+"assets/images/schema-add-code-20796157312fa24711fb1c79961af1cb.png"},1254:function(e,t,n){"use strict";t.Z=n.p+"assets/images/schema-add-schema-6cc698296202cc3240d6eea2c54988bb.png"}}]);